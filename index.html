<!DOCTYPE html>
<html lang="en">  
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta property="og:title" content="{{tld}} Domains" />
    <meta property="og:image" content="/preview.png" />
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link href='https://fonts.googleapis.com/css?family=Roboto Mono' rel='stylesheet'>
    <title data-tld>{{tld}} Domains</title>
    <script type="module" src="tld.js"></script>
    <!-- <script type="module" src="main.js"></script> -->
    <script>
      window.options = {
        color: [
          'linear-gradient(7deg, transparent, black)',
          'linear-gradient(7deg, blueviolet, purple)',
          'linear-gradient(7deg, cyan, gold)',
          'linear-gradient(7deg, rgb(100,80,146), rgb(200,160,255), rgba(100,27,245) 52%)',
          'linear-gradient(205deg, goldenrod 2%, rgb(255,52,255), rgb(55,152,255))'
        ]
      };

      function randomizeColor() {
        const randomGradient = settings.color[Math.floor(Math.random()*settings.color.length)];
        card.style.background = randomGradient;
      };

      function setTLD() {
        const allElements = Array.from(document.querySelectorAll(`[data-tld]`));
        allElements.forEach(element => {
          const t = element.innerText;
          const r = t.replace("{{tld}}",window.tld);
          element.innerText = r;
        });
      };

      function keyDownHandler() {
        if (event.key === 'Enter') {
          const url = `https://impervious.domains/name/${event.target.value}${window.tld}/register/`;
          location.target = '_blanc';
          location.href = url;
        };
      };

      function setDomain(n) {
        showcase.innerText = n;
      };

      function updateHandler() {
        name = input.value;
        setDomain(name);
        randomizeColor();
      }

      function loadedHandler() {
        setTLD();
        const settings = window.options;
        const card = document.body.querySelector(`#card`);
        const input = document.body.querySelector(`#domainname`);
        const showcase = document.body.querySelector(`[data-std="domainname"]`);
      };

      (() => {
        document.addEventListener("DOMContentLoaded", loadedHandler, false);
      })();
    </script>
  </head>
  <body>  
    <header>
      <h1 data-tld class="title">
        {{tld}} Domains
      </h1>
      <div class="subtitle">Decentralized domains on Ethereum</div>
      <div class="subtitle">in a decentralized root zone</div>
      <div class="subtitle">on Handshake</div>
    </header>
    <main>
      <div class="search">
        <div id="card" class="domain flashy" style="width: 316px; height: 316px; display: flex; justify-content: center; align-items: center; background: darkgrey; border-radius: 1em; margin: 1em 0px 2em;">
          <h2 data-tld style="font-size: 143%;">
            <span data-std="domainname"></span>{{tld}}
          </h2>
        </div>
        <span>
          <input type="text" class="searchbox" placeholder="Enter domain" value="" onchange="updateHandler()" onkeyup="updateHandler()" onkeydown="keyDownHandler()" id="domainname"> 
          <!-- <div data-tld class="subtitle green">{{tld}}</div> -->
        </span>
      </div>
      <div class="wrap-collabsible">
        <input id="collapsible" class="toggle" type="checkbox"></input>
        <label data-tld for="collapsible" class="lbl-toggle">
          How to access {{tld}} sites
        </label>
        <div class="collapsible-content">
          <div class="content-inner">
            <div>
              (1) <a href="https://impervious.com/fingertip">Fingertip</a> Resolver, 
              (2) <a href="https://impervious.com/beacon">Beacon</a> Browser, 
              (3) <a href="https://hns.is/">Hns.is</a> Gateway,
              (4) <a href="https://github.com/handshake-org/hsd">HSD</a> Fullnode
            </div>
            <br/>
          </div>
        </div>
      </div>
      <div class="wrap-collabsible">
        <input id="collapsible2" class="toggle" type="checkbox"></input>
        <label data-tld for="collapsible2" class="lbl-toggle">
          How to set up {{tld}} sites
        </label>
        <div class="collapsible-content">
          <div class="content-inner">
            <div>
              (1) Handshake web hosting options include using a personal <a href="https://github.com/pinheadmz/handout">webserver</a>, <a href="https://www.instructables.com/Nginx-DANE-Hosting-on-Google-VM-for-Handshake/">NGINX + Google VM</a> or <a href="https://docs.ipfs.tech/how-to/websites-on-ipfs/link-a-domain/#handshake">IPFS</a>.
              <br/>
              <div>
                then
              </div>
              <br/>
              (2a) Connect your domain by adding name records directly on Ethereum
              <br/>
              <div>
                or
              </div>
              <br/>
              (2b) Point NS records to a <a href="https://hshub.io/">public</a> or <a href="https://github.com/pinheadmz/handout">self-hosted</a> nameserver to add records off-chain
            </div>
            <br/>
          </div>
        </div>
      </div>
    </main>
    <!-- <div class="footer"> -->
    <footer>
      Website by <a href="https://theshake.xyz/">The Shake</a>
    </footer>
    <!-- </div> -->
  </body>
</html>
